# Integrantes

- Pedro Henrique dos Santos RM: 559064
- Thiago Thomaz RM: 557992

# üèçÔ∏è Mottu Challenge - Gest√£o de P√°tio e Setores

Este projeto implementa um sistema de **gest√£o de p√°tio (Yard)**, **setores (Sector)** e **vagas (Spots)** para organiza√ß√£o e aloca√ß√£o de motos.  
O objetivo √© permitir que filiais da Mottu consigam estruturar seus p√°tios em setores e, automaticamente, gerar as vagas dispon√≠veis para as motos.

---

## üìå Dom√≠nio

- **Yard (P√°tio)**  
  Representa um espa√ßo f√≠sico de uma filial, que pode conter m√∫ltiplos setores.  
  Cada p√°tio possui dimens√µes e restri√ß√µes de coordenadas.

- **Sector (Setor)**  
  Representa uma √°rea dentro de um p√°tio.  
  √â definido por pontos (pol√≠gono), e a partir dele s√£o geradas vagas (spots).  
  O sistema valida se o setor:
  - Est√° contido dentro do p√°tio.  
  - N√£o se sobrep√µe a outros setores do mesmo p√°tio.  

- **Spot (Vaga)**  
  Representa uma vaga de moto dentro de um setor.  
  Por padr√£o, cada vaga ocupa um espa√ßo de **2m x 2m**.  
  Exemplo: um setor de 10m x 10m comporta 25 vagas.  

---

## ‚öôÔ∏è Instru√ß√µes de Execu√ß√£o

### Pr√©-requisitos
- [.NET 8 SDK](https://dotnet.microsoft.com/en-us/download/dotnet/8.0)
- Banco de dados MySQL
- [EF Core CLI](https://learn.microsoft.com/en-us/ef/core/cli/dotnet)

### Passos
1. Clone o reposit√≥rio:
   ```bash
   git clone https://github.com/seu-usuario/mottu-challenge.git](https://github.com/Pedro-Henrique3216/CP4-Dotnet/
   cd mottu-challenge
   ```
   Abra a solu√ß√£o
2. Configure a connection string no appsettings.json:
  ```bash
  "ConnectionStrings": {
  "MySqlConnection": "server=localhost;uid={seu usuario};pwd={sua senha};database={nome do database}"
  }
  ```
3. Abra o Package menager console que fica no tools NuGet Package Menage e rode esse comando
   ```bash
   Update-Database -Project MottuChallenge.Infrastructure -StartupProject MottuChallenge.Api
   ```
4. Start o Programa

---

## Testes

POST /api/yards
Content-Type: application/json

```json{
  "name": "P√°tio Central",
  "cep": "01311300",
  "number": "100",
  "points": [
    { "pointOrder": 1, "x": 0, "y": 0 },
    { "pointOrder": 2, "x": 0, "y": 50 },
    { "pointOrder": 3, "x": 50, "y": 50 },
    { "pointOrder": 4, "x": 50, "y": 0 }
  ]
}
```

Aqui ele usa a api do via cep para buscar o endere√ßo da pessoa

POST /api/sectors_type
Content-Type: application/json

```json
{
  "name": "Estacionamento"
}
```

Tem valida√ß√£o se ja existe sector_type com esse nome

POST /api/sectors
Content-Type: application/json

```json
{
  "yardId": "id gerado quando cria o yard",
  "sectorTypeId": "id gerado quando cria sectorType",
  "points": [
    {
      "pointOrder": 1,
      "x": 0,
      "y": 0
    },
    {
      "pointOrder": 2,
      "x": 0,
      "y": 10
    },
    {
      "pointOrder": 3,
      "x": 10,
      "y": 10
    },
    {
      "pointOrder": 4,
      "x": 10,
      "y": 0
    }
  ]
}
```

com isso sera gerado o maximo de vagas disponiveis para a dimens√£o do setor, aqui tem valida√ß√£o se o setor cabe dentro do patio ou se ja tem um setor cadastrado nesse lugar.




  
